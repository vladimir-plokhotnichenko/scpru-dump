{"uid": 5822, "pageId": "component:timer", "title": "Timer", "source": "\n[[html]]\n<html>\n<head>\n\u00a0\u00a0\u00a0\u00a0<style type=\"text/css\">\n\u00a0\u00a0\u00a0body{\n\u00a0\u00a0\u00a0\u00a0text-align: center;\n\u00a0\u00a0\u00a0\u00a0font-family: verdana,arial,helvetica,sans-serif;\n\u00a0\u00a0font-weight: 100;\n}\n\nh1{\n\u00a0\u00a0color: #b01;\n\u00a0\u00a0font-weight: 100;\n\u00a0\u00a0font-size: 20px;\n\u00a0\u00a0margin: 20px 0px 20px;\n}\n\n#clockdiv{\n\u00a0\u00a0\u00a0\u00a0color: #fff;\n\u00a0\u00a0\u00a0\u00a0display: inline-block;\n\u00a0\u00a0\u00a0\u00a0font-weight: 100;\n\u00a0\u00a0\u00a0\u00a0text-align: center;\n\u00a0\u00a0\u00a0\u00a0font-size: 20px;\n}\n\n#clockdiv > div{\n\u00a0\u00a0\u00a0\u00a0padding: 10px;\n\u00a0\u00a0\u00a0\u00a0border-radius: 3px;\n\u00a0\u00a0\u00a0\u00a0background: #999990;\n\u00a0\u00a0\u00a0\u00a0display: inline-block;\n\u00a0\u00a0\u00a0\u00a0width: 128px;\n}\n\n#clockdiv div > span{\n\u00a0\u00a0\u00a0\u00a0padding: 8px;\n\u00a0\u00a0color: #b01;\n\u00a0\u00a0\u00a0\u00a0border-radius: 3px;\n\u00a0\u00a0\u00a0\u00a0background: #fff;\n\u00a0\u00a0\u00a0\u00a0display: inline-block;\n\u00a0\u00a0\u00a0\u00a0min-width: 32px;\n}\n\n.smalltext{\n\u00a0\u00a0color: black;\n\u00a0\u00a0\u00a0\u00a0padding-top: 5px;\n\u00a0\u00a0\u00a0\u00a0font-size: 12px;\n}\n\n\n\n#message{\n\u00a0\u00a0color: #b01;\n\u00a0\u00a0\u00a0\u00a0padding-top: 5px;\n\u00a0\u00a0\u00a0\u00a0font-size: 14px;\n}\n\n.displayblock{\n\u00a0\u00a0\u00a0\u00a0background: #e5e6e8;\n\u00a0\u00a0\u00a0\u00a0border-radius: 2px;\n\u00a0\u00a0\u00a0\u00a0margin-bottom: 10px;\n\u00a0\u00a0\u00a0\u00a0width: calc(128px * 5);\n\u00a0\u00a0\u00a0\u00a0position: relative;\n\u00a0\u00a0\u00a0\u00a0box-shadow: 0 1px 3px rgba(0,0,0,0.12), 0 1px 2px rgba(0,0,0,0.24);\n\u00a0\u00a0\u00a0\u00a0transition: all 0.3s cubic-bezier(.25,.8,.25,1);\n\u00a0\u00a0\u00a0\u00a0padding: 5px;\n}\n\u00a0\u00a0</style>\n\n</head>\n<body>\n<div class=\"displayblock\">\n\u00a0\u00a0\u00a0\u00a0<h1 id=\"topMessage\"></h1>\n\u00a0\u00a0\u00a0\u00a0<div id=\"clockdiv\">\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<span class=\"days\"></span>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div class=\"smalltext_days\">-</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<span class=\"hours\"></span>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div class=\"smalltext_hours\">-</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<span class=\"minutes\"></span>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div class=\"smalltext_minutes\">-</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<span class=\"seconds\"></span>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0<div class=\"smalltext_seconds\">-</div>\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0</div>\n\u00a0\u00a0\u00a0\u00a0</div>\n\u00a0\u00a0\u00a0\u00a0<span id=\"message\"></span>\n</div>\n\n\n\n<script>\nfunction getOrDefault(s, def) {\n\u00a0\u00a0if (s.startsWith('{$')) return def;\n\u00a0\u00a0return s*1;\n}\n\nfunction pickForm(number, forms) {\n\u00a0\u00a0number %= 10;\n\u00a0\u00a0// forms = \u0447\u0430\u0441\u043e\u0432, \u0447\u0430\u0441, \u0447\u0430\u0441\u0430\n\u00a0\u00a0if (number === 1) return forms[1];\n\u00a0\u00a0if (number >= 2 && number <= 4) return forms[2];\n\u00a0\u00a0return forms[0];\n}\n\nfunction getTimeRemaining(endtime) {\n\u00a0\u00a0const today = new Date();\n\u00a0\u00a0let year = getOrDefault('{$year}', today.getYear()+1900);\n\u00a0\u00a0let mon = getOrDefault('{$mon}', today.getMonth()+1);\n\u00a0\u00a0let day = getOrDefault('{$day}', today.getDate());\n\u00a0\u00a0let hour = getOrDefault('{$hour}', today.getHours());\n\u00a0\u00a0mon -= 1;\n\u00a0\u00a0let t = Date.UTC(year, mon, day, hour) - Date.parse(new Date());\n\u00a0\u00a0let seconds = Math.floor((t / 1000) % 60);\n\u00a0\u00a0let minutes = Math.floor((t / 1000 / 60) % 60);\n\u00a0\u00a0let hours = Math.floor((t / (1000 * 60 * 60)) % 24);\n\u00a0\u00a0let days = Math.floor(t / (1000 * 60 * 60 * 24));\n\u00a0\u00a0return {\n\u00a0\u00a0\u00a0\u00a0'total': t,\n\u00a0\u00a0\u00a0\u00a0'days': days,\n\u00a0\u00a0\u00a0\u00a0'hours': hours,\n\u00a0\u00a0\u00a0\u00a0'minutes': minutes,\n\u00a0\u00a0\u00a0\u00a0'seconds': seconds\n\u00a0\u00a0};\n}\n\u00a0\nfunction initializeClock(id, endtime) {\n\u00a0\u00a0var daysSpan = document.getElementsByClassName('days')[0];\n\u00a0\u00a0var hoursSpan = document.getElementsByClassName('hours')[0];\n\u00a0\u00a0var minutesSpan = document.getElementsByClassName('minutes')[0];\n\u00a0\u00a0var secondsSpan = document.getElementsByClassName('seconds')[0];\n\u00a0\u00a0const daysTitle = document.getElementsByClassName('smalltext_days')[0];\n\u00a0\u00a0const hoursTitle = document.getElementsByClassName('smalltext_hours')[0];\n\u00a0\u00a0const minutesTitle = document.getElementsByClassName('smalltext_minutes')[0];\n\u00a0\u00a0const secondsTitle = document.getElementsByClassName('smalltext_seconds')[0];\n\u00a0\n\u00a0\u00a0function updateClock() {\n\u00a0\u00a0\u00a0\u00a0var t = getTimeRemaining(endtime);\n\u00a0\n\u00a0\u00a0\u00a0\u00a0daysSpan.innerHTML = t.days;\n\u00a0\u00a0\u00a0\u00a0hoursSpan.innerHTML = t.hours;\n\u00a0\u00a0\u00a0\u00a0minutesSpan.innerHTML = t.minutes;\n\u00a0\u00a0\u00a0\u00a0secondsSpan.innerHTML = t.seconds;\n\u00a0\u00a0\u00a0\u00a0daysTitle.innerHTML = pickForm(t.days, ['\u0434\u043d\u0435\u0439', '\u0434\u0435\u043d\u044c', '\u0434\u043d\u044f']);\n\u00a0\u00a0\u00a0\u00a0hoursTitle.innerHTML = pickForm(t.hours, ['\u0447\u0430\u0441\u043e\u0432', '\u0447\u0430\u0441', '\u0447\u0430\u0441\u0430']);\n\u00a0\u00a0\u00a0\u00a0minutesTitle.innerHTML = pickForm(t.minutes, ['\u043c\u0438\u043d\u0443\u0442', '\u043c\u0438\u043d\u0443\u0442\u0430', '\u043c\u0438\u043d\u0443\u0442\u044b']);\n\u00a0\u00a0\u00a0\u00a0secondsTitle.innerHTML = pickForm(t.seconds, ['\u0441\u0435\u043a\u0443\u043d\u0434', '\u0441\u0435\u043a\u0443\u043d\u0434\u0430', '\u0441\u0435\u043a\u0443\u043d\u0434\u044b']);\n\u00a0\n\u00a0\u00a0\u00a0\u00a0if (t.total <= 0) {\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0clearInterval(timeinterval);\n\u00a0\u00a0\u00a0\u00a0}\n\u00a0\u00a0}\n\u00a0\n\u00a0\u00a0updateClock();\n\u00a0\u00a0var timeinterval = setInterval(updateClock, 1000);\n}\n\u00a0\nvar deadline = new Date(Date.parse(new Date()) + 15 * 24 * 60 * 60 * 1000); // for endless timer\ninitializeClock('countdown', deadline);\n</script>\n</body>\n</html>\n[[/html]]\n", "tags": ["\u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u0430:\u0432\u0438\u0437\u0443\u0430\u043b\u044c\u043d\u044b\u0439_\u044d\u043b\u0435\u043c\u0435\u043d\u0442"], "parent": null, "locked": false}