{"uid": 14663, "pageId": "system:author-pages", "title": "\u0421\u0442\u0430\u0442\u044c\u0438 \u043f\u043e \u0430\u0432\u0442\u043e\u0440\u0443", "source": "[[div_]]\n[[if %%path|fullname%%]]\n[[div style=\"position: relative; left: -1em; max-width: none; width: calc(100% + 2em);\"]]\n[[module CSS]]\n#page-title {\n\u00a0\u00a0display: none !important\n}\n[[/module]]\n[[html]]\n<head>\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/-/static/wikidot-base.css?v=0f336c50\">\n<link rel=\"stylesheet\" type=\"text/css\" href=\"/-/static/scp-base.css?v=aadb477f\">\n<style>\n.sub-page-title {\n\u00a0\u00a0border-bottom: 1px solid #bbb;\n\u00a0\u00a0margin: 0 0 0.6em;\n}\n.sub-page-title h1 {\n\u00a0\u00a0font-size: 200%;\n\u00a0\u00a0font-weight: normal;\n\u00a0\u00a0padding: 0 0 0.25em 0;\n\u00a0\u00a0margin: 0;\n\u00a0\u00a0font-family: inherit;\n}\n.sub-page-title h1 sup {\n\u00a0\u00a0line-height: 0;\n}\n.author-single {\n\u00a0\u00a0display: block;\n\u00a0\u00a0padding: 24px;\n\u00a0\u00a0border: 1px solid #f7f7f7;\n\u00a0\u00a0box-shadow: 0px 2px 4px #00000011;\n\u00a0\u00a0margin-bottom: 8px;\n\u00a0\u00a0transition: all 0.2s ease;\n\u00a0\u00a0background: white;\n\u00a0\u00a0text-decoration: none !important;\n\u00a0\u00a0color: black !important;\n}\n.author-single:hover {\n\u00a0\u00a0background: #f7f7f7;\n\u00a0\u00a0border: 1px solid #f0f0f0;\n\u00a0\u00a0box-shadow: 0px 2px 7px #00000022;\n}\n.author-single .title {\n\u00a0\u00a0display: block;\n\u00a0\u00a0font-size: 24px;\n\u00a0\u00a0line-height: 30px;\n\u00a0\u00a0font-weight: 500;\n\u00a0\u00a0color: #b01;\n}\n.author-single .c-tags {\n\u00a0\u00a0display: block;\n\u00a0\u00a0margin-top: 8px;\n  font-size: 90%;\n}\n</style>\n</head>\n<body style=\"background-color: transparent; overflow: hidden; padding: 0 1em;\">\n<div class=\"sub-page-title\"><h1><span>\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430...</span></h1></div>\n<div class=\"error-block\" style=\"display: none;\"><p></p></div>\n<div id=\"container\"></div>\n<script>\nasync function urlExists(url, callback) {\n  const result = await api.fetchArticle(url)\n  callback(result)\n}\n\nconst myHeaders = new Headers()\nmyHeaders.append(\"Content-Type\", \"application/json\")\nconst graphql = JSON.stringify({\n  query: `query {\n  page(url: \"http://scp-wiki.wikidot.com/%%path|fullname%%\") {\n    wikidotInfo {\n      createdBy {\n        name\n        attributedPages(\n          filter: {\n            url: {\n              startsWith: \"http://scp-wiki.wikidot.com\"\n            }\n            wikidotInfo: {\n              category: {\n                eq: \"_default\"\n              }\n            }\n            attributions: {\n              type: {\n                neq: TRANSLATOR\n              }\n            }\n          }\n          first: 599\n        ) {\n          edges {\n            node {\n              url\n            }\n          }\n        }\n      }\n    }\n  }\n}`,\n  variables: {},\n})\nconst requestOptions = {\n  method: \"POST\",\n  headers: myHeaders,\n  body: graphql,\n  redirect: \"follow\",\n}\n\nfetch(\"https://api.crom.avn.sh/graphql\", requestOptions)\n  .then((response) => response.json())\n  .then((result) => {\n    const urls = []\n    const createdBy = result.data.page.wikidotInfo.createdBy.name\n    document.querySelectorAll('.sub-page-title h1 span')[0].innerText = \"\u0421\u0442\u0430\u0442\u044c\u0438 \" + createdBy\n    const edges = result.data.page.wikidotInfo.createdBy.attributedPages.edges\n    edges.forEach((edge) => {\n      if (edge.node && edge.node.url) {\n        urls.push(\n          edge.node.url.replace(\"http://scp-wiki.wikidot.com/\", \"\"),\n        )\n      }\n    })\n    urls.forEach((url) => {\n      urlExists(url, function (result) {\n          if (!result.error) {\n            let tags = result.tags\n            let title = result.title\n            let p = document.createElement(\"p\")\n            let link = document.createElement(\"a\")\n            let spantitle = document.createElement(\"span\")\n            let spantags = document.createElement(\"span\")\n            link.setAttribute(\"href\", \"https://scpfoundation.net/\" + url)\n            link.setAttribute(\"target\", \"_top\")\n            link.setAttribute(\"class\", \"author-single\")\n            spantitle.setAttribute(\"class\", \"title\")\n            spantitle.innerText = title\n            spantags.setAttribute(\"class\", \"c-tags\")\n            spantags.innerText = \"\u0422\u0435\u0433\u0438: \" + tags.join(', ');\n            link.appendChild(spantitle)\n            link.appendChild(spantags)\n            p.appendChild(link)\n            document.getElementById(\"container\").appendChild(p)\n          }\n        })\n    })\n  })\n  .catch((error) => {\n    document.querySelectorAll(\".error-block\")[0].style.display = \"block\"\n    document.querySelectorAll(\".error-block p\")[0].innerText = error\n  })\n</script>\n</body>\n[[/html]]\n[[/div]]\n[[else]]\n[[div class=\"error-block\"]]\n\u041e\u0442\u0441\u0443\u0442\u0441\u0442\u0432\u0443\u0435\u0442 \u043f\u0430\u0440\u0430\u043c\u0435\u0442\u0440 fullname \u0432 URL\n[[/div]]\n[[/if]]\n[[/div]]", "tags": [], "parent": null, "locked": true}